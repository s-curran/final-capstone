(function(t){function e(e){for(var r,o,s=e[0],c=e[1],u=e[2],d=0,p=[];d<s.length;d++)o=s[d],a[o]&&p.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(p.length)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},a={app:0},i=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"03a4":function(t,e,n){},"0782":function(t,e,n){"use strict";var r=n("c366"),a=n.n(r);a.a},2807:function(t,e,n){},"2a1d":function(t,e,n){},"2c28":function(t,e,n){},"2d49":function(t,e,n){},"35b7":function(t,e,n){"use strict";var r=n("2a1d"),a=n.n(r);a.a},"481e":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("h1",{attrs:{id:"pageTitle"}},[t._v("Build City Tours")]),t.user?n("div",[n("div",[n("button",{on:{click:t.logout}},[t._v("Logout")]),n("div",[n("button",{on:{click:t.viewItinerary}},[t._v("View Saved Itineraries")])])])]):n("div",[n("router-link",{attrs:{tag:"button",id:"link",to:{name:"login"}}},[t._v("Login")]),n("div"),n("router-link",{attrs:{tag:"button",id:"link",to:{name:"register"}}},[t._v("Register")])],1),n("router-link",{attrs:{tag:"button",id:"link",to:"/"}},[t._v("Home")])],1),n("router-view")],1)},i=[],o=(n("a481"),n("28a5"),{getToken:function(){try{return localStorage.getItem("Authorization")}catch(t){return null}},saveToken:function(t){localStorage.setItem("Authorization",t)},destroyToken:function(){localStorage.removeItem("Authorization")},getUser:function(){var t=localStorage.getItem("Authorization"),e=null;if(t){var n=t.split(".")[1],r=n.replace(/-/g,"+").replace(/_/g,"/"),a=new Date/1e3,i=JSON.parse(window.atob(r));a>i.exp?this.destroyToken():(e=i,console.log(e))}return e},logout:function(){localStorage.removeItem("Authorization")}}),s={data:function(){return{user:null}},methods:{logout:function(){o.logout(),this.$router.push("/login"),this.user=null},viewItinerary:function(){this.$router.push("/itineraries")}},created:function(){this.user=o.getUser()},watch:{$route:function(){this.user=o.getUser()}}},c=s,u=(n("65eb"),n("2877")),l=Object(u["a"])(c,a,i,!1,null,"7dfd1abf",null),d=l.exports,p=(n("759f"),n("8c4f")),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("search",{staticClass:"search",on:{results:t.displayResults},model:{value:t.searchResults,callback:function(e){t.searchResults=e},expression:"searchResults"}}),n("br"),t.user?n("div",{staticClass:"itin"},[t.existingId?t._e():n("div",[!0===t.toggle?n("div",[n("create-itin",{staticClass:"create",on:{"itinerary-added":function(e){t.toggle=!1}}})],1):t._e(),n("select-itin",{staticClass:"selectItin",attrs:{show:!0},on:{selected:t.handleEvent}})],1)]):t._e(),t.searchResults.length>=1?n("div",[n("h3",{staticClass:"listTitle"},[t._v("Landmarks to visit "+t._s(t.cityName)+":")]),n("ul",t._l(t.searchResults,function(e){return n("div",{key:e,attrs:{id:"result"}},[n("router-link",{staticClass:"resultText",attrs:{to:{name:"detail",params:{id:e.place_id}}}},[t._v(t._s(e.name))]),t.itineraryId?n("div",{staticClass:"addTo"},[n("add",{attrs:{LandmarkId:e.place_id,LandmarkName:e.name,LandmarkAddress:e.vicinity,ItineraryId:t.itineraryId}})],1):t._e()],1)}),0)]):n("div",[n("h3",{staticClass:"needToSearch"},[t._v("Enter a location above to view landmarks!")])])],1)},m=[],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search"},[n("br"),n("div",{staticClass:"box"},[n("label",[t._v("Location:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],attrs:{type:"text",id:"text",placeholder:"City, State"},domProps:{value:t.address},on:{blur:t.getLatLong,input:function(e){e.target.composing||(t.address=e.target.value)}}})]),n("button",{staticClass:"search",class:{locationAccessed:t.lat},attrs:{type:"button"},on:{click:t.getLocation}},[t._v("Or Get Current Location")]),n("br"),n("div",{staticClass:"box"},[n("label",[t._v("Distance:")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.radius,expression:"radius"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.radius=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"1609.34"}},[t._v("1 mile")]),n("option",{attrs:{value:"3218.69"}},[t._v("2 miles")]),n("option",{attrs:{value:"8046.72"}},[t._v("5 miles")]),n("option",{attrs:{value:"16093.4"}},[t._v("10 miles")])])]),n("div",{staticClass:"box"},[n("label",[t._v("Type:")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.type=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"tourist_attraction"}},[t._v("Tourist Attraction")]),n("option",{attrs:{value:"restaurant"}},[t._v("Restaurant")]),n("option",{attrs:{value:"stadium"}},[t._v("Sports")]),n("option",{attrs:{value:"park"}},[t._v("Park")]),n("option",{attrs:{value:"museum"}},[t._v("Museum")])])]),n("div",{staticClass:"box"},[n("label",{attrs:{id:"opennow"}},[t._v("Only open now")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.opennow,expression:"opennow"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.opennow)?t._i(t.opennow,null)>-1:t.opennow},on:{change:function(e){var n=t.opennow,r=e.target,a=!!r.checked;if(Array.isArray(n)){var i=null,o=t._i(n,i);r.checked?o<0&&(t.opennow=n.concat([i])):o>-1&&(t.opennow=n.slice(0,o).concat(n.slice(o+1)))}else t.opennow=a}}})]),n("br"),n("button",{staticClass:"search",attrs:{type:"submit"},on:{click:t.findLandmarks}},[t._v("Submit")])])},v=[],g={name:"Search",data:function(){return{address:"",lat:"",long:"",radius:"",type:"",opennow:!1,key:"AIzaSyANWIg-qW05HeNmXG2Yh1Fd7w8I9w4WXto",results:[],city:""}},methods:{findLandmarks:function(){var t=this,e="".concat("https://buildcitytoursapi.azurewebsites.net/api","/search/places?location=").concat(this.lat,",").concat(this.long,"&radius=").concat(this.radius,"&type=").concat(this.type,"&opennow=").concat(this.opennow);fetch(e).then(function(e){e.ok?e.text().then(function(e){t.results=JSON.parse(e).results,t.$emit("results",t.results)}):console.log(e.status)}).catch(function(t){console.log(t)})},getLatLong:function(){var t=this,e="".concat("https://buildcitytoursapi.azurewebsites.net/api","/search/address?address=").concat(this.address);fetch(e).then(function(e){e.ok?e.json().then(function(e){t.lat=e.results[0].geometry.location.lat,t.long=e.results[0].geometry.location.lng}):alert("Enter a different address")}).catch(function(t){return console.error(t)})},getLocation:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(this.showPosition):alert("Geolocation is not supported by this browser")},showPosition:function(t){this.lat=t.coords.latitude,this.long=t.coords.longitude}}},y=g,b=(n("0782"),Object(u["a"])(y,f,v,!1,null,null,null)),_=b.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"box"},[n("label",[t._v("Itinerary Name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.itinerary.TourName,expression:"itinerary.TourName"}],attrs:{type:"text"},domProps:{value:t.itinerary.TourName},on:{input:function(e){e.target.composing||t.$set(t.itinerary,"TourName",e.target.value)}}})]),n("div",{staticClass:"box"},[n("label",[t._v("Itinerary Date")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.itinerary.DateOfTour,expression:"itinerary.DateOfTour"}],attrs:{type:"date"},domProps:{value:t.itinerary.DateOfTour},on:{input:function(e){e.target.composing||t.$set(t.itinerary,"DateOfTour",e.target.value)}}})]),n("div",{staticClass:"box"},[n("label",[t._v("Starting Address")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.itinerary.StartPoint,expression:"itinerary.StartPoint"}],attrs:{type:"text"},domProps:{value:t.itinerary.StartPoint},on:{input:function(e){e.target.composing||t.$set(t.itinerary,"StartPoint",e.target.value)}}})]),n("button",{attrs:{type:"button"},on:{click:t.saveItin}},[t._v("Create")])])},k=[],I={name:"CreateItin",data:function(){return{itinerary:{DateOfTour:"",TourName:"",StartPoint:""}}},methods:{saveItin:function(){var t=this,e="".concat("https://buildcitytoursapi.azurewebsites.net/api","/itinerary/create");fetch(e,{method:"POST",headers:new Headers({Authorization:"Bearer "+o.getToken(),Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify(this.itinerary)}).then(function(e){e.ok?e.json().then(function(e){console.log(e),t.$emit("itinerary-added")}):console.log("Itinerary failed to save!!")}).catch(function(t){console.error(t)})}}},C=I,A=(n("c6dd"),Object(u["a"])(C,w,k,!1,null,"7c1cadbb",null)),T=A.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],on:{focus:t.getItins,click:t.selectItin,change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.selected=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Select your Itinerary")]),t._l(t.options,function(e){return n("option",{key:e.itineraryId,domProps:{value:e.itineraryId}},[t._v(t._s(e.tourName))])}),t.showCreate?n("option",{attrs:{value:"Create Itinerary"}},[t._v("Create New Itinerary")]):t._e()],2)])},S=[],R={name:"SelectItin",props:{show:Boolean},data:function(){return{options:[],selected:""}},computed:{showCreate:function(){return this.show}},methods:{getItins:function(){var t=this,e="".concat("https://buildcitytoursapi.azurewebsites.net/api","/itinerary/list");fetch(e,{method:"GET",headers:new Headers({Authorization:"Bearer "+o.getToken(),Accept:"application/json","Content-Type":"application/json"})}).then(function(e){e.ok?e.json().then(function(e){t.options=e}):console.log("Could not get itineraries")}).catch(function(t){return console.error(t)})},selectItin:function(){this.$emit("selected",this.selected),"Create Itinerary"===this.selected&&(this.selected="")}},created:function(){this.getItins()}},N=R,O=Object(u["a"])(N,x,S,!1,null,null,null),P=O.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{attrs:{type:"button"},on:{click:t.addToItin}},[t._v("Add to Itinerary")])])},L=[],E=(n("c5f6"),{name:"Add",props:{LandmarkId:String,LandmarkName:String,LandmarkAddress:String,ItineraryId:Number},computed:{item:function(){return{LandmarkId:this.LandmarkId,LandmarkName:this.LandmarkName,LandmarkAddress:this.LandmarkAddress,ItineraryId:this.ItineraryId}}},methods:{addToItin:function(){var t=this,e="".concat("https://buildcitytoursapi.azurewebsites.net/api","/itinerary/add");fetch(e,{method:"POST",headers:new Headers({Authorization:"Bearer "+o.getToken(),Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify(this.item)}).then(function(e){e.ok?(t.$emit("landmark-added"),alert("Landmark has been added to itinerary")):alert("Landmark already in itinerary")}).catch(function(t){return console.error(t)})}}}),$=E,D=Object(u["a"])($,j,L,!1,null,null,null),z=D.exports,q={name:"home",components:{Search:_,CreateItin:T,SelectItin:P,Add:z},data:function(){return{cityName:"near you",itineraryId:"",existingId:"",user:null,toggle:!1,searchResults:[]}},methods:{displayResults:function(t){this.searchResults=t},handleEvent:function(t){"Create Itinerary"===t?this.toggle=!0:(this.itineraryId=t,this.toggle=!1)},toggleForm:function(){this.toggle=!this.toggle}},created:function(){this.user=o.getUser(),this.itineraryId=this.$route.params.id,this.existingId=this.$route.params.id},watch:{$route:function(){this.user=o.getUser()}}},H=q,B=(n("cccb"),Object(u["a"])(H,h,m,!1,null,null,null)),U=B.exports,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center",attrs:{id:"login"}},[n("form",{staticClass:"form-signin",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[n("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("Please Sign In")]),t.invalidCredentials?n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v("\n      Invalid username and password!\n    ")]):t._e(),this.$route.query.registration?n("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v("\n      Thank you for registering, please sign in.\n    ")]):t._e(),n("div",{attrs:{id:"username"}},[n("label",{staticClass:"sr-only",attrs:{for:"username"}},[t._v("Username")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"text",id:"username",placeholder:"Username",required:"",autofocus:""},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}})]),n("div",{attrs:{id:"password"}},[n("label",{staticClass:"sr-only",attrs:{for:"password"}},[t._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"Password",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]),t._m(0),n("div",{attrs:{id:"register"}},[n("router-link",{attrs:{to:{name:"register"}}},[t._v("Need an account? Click here to create an account.")])],1)])])},G=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"btn"}},[n("button",{attrs:{type:"submit"}},[t._v("Sign in")])])}],M=(n("6762"),n("2fdb"),{name:"login",components:{},data:function(){return{user:{username:"",password:""},invalidCredentials:!1}},methods:{login:function(){var t=this;fetch("".concat("https://buildcitytoursapi.azurewebsites.net/api","/login"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(this.user)}).then(function(e){if(e.ok)return e.text();t.invalidCredentials=!0}).then(function(e){void 0!=e&&(e.includes('"')&&(e=e.replace(/"/g,"")),o.saveToken(e),t.$router.push("/"))}).catch(function(t){return console.error(t)})}}}),F=M,W=(n("97dc"),Object(u["a"])(F,J,G,!1,null,"5e46e21b",null)),Y=W.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center",attrs:{id:"register"}},[n("form",{staticClass:"form-register",on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[n("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("Create Account")]),t.registrationErrors?n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v("\n      There were problems registering this user.\n    ")]):t._e(),n("div",{attrs:{id:"un"}},[n("label",{staticClass:"sr-only",attrs:{for:"username"}},[t._v("Username")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"text",id:"username",placeholder:"Username",required:"",autofocus:""},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}})]),n("div",{attrs:{id:"pw"}},[n("label",{staticClass:"sr-only",attrs:{for:"password"}},[t._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"Password",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),n("div",{staticClass:"confirm"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.user.confirmPassword,expression:"user.confirmPassword"}],staticClass:"form-control",attrs:{type:"password",id:"confirmPassword",placeholder:"Confirm Password",required:""},domProps:{value:t.user.confirmPassword},on:{input:function(e){e.target.composing||t.$set(t.user,"confirmPassword",e.target.value)}}})])]),t._m(0),n("div",{attrs:{id:"login"}},[n("router-link",{attrs:{to:{name:"login"}}},[t._v("\n      Have an account? Click here to login.\n    ")])],1)])])},X=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"btn"}},[n("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[t._v("\n      Create Account\n    ")])])}],K={name:"register",data:function(){return{user:{username:"",password:"",confirmPassword:"",role:"user"},registrationErrors:!1}},methods:{register:function(){var t=this;fetch("".concat("https://buildcitytoursapi.azurewebsites.net/api","/register"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(this.user)}).then(function(e){e.ok?t.$router.push({path:"/login",query:{registration:"success"}}):t.registrationErrors=!0}).then(function(t){return console.error(t)})}}},Q=K,Z=(n("35b7"),Object(u["a"])(Q,V,X,!1,null,"b8a278fe",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"display"},[n("h1",[t._v(t._s(t.itinerary.tourName))]),n("p",[t._v(t._s(t.getDate(t.itinerary.dateOfTour)))]),n("p",{attrs:{id:"start"}},[t._v("Starting address: "+t._s(t.itinerary.startPoint))]),t._l(t.itinerary.landmarks,function(e){return n("div",{key:e.landmarkId,staticClass:"OneLine"},[n("router-link",{attrs:{to:{name:"detail",params:{id:e.landmarkId}}}},[n("ul",[n("li",{staticClass:"OneLine"},[t._v(t._s(e.landmarkName))])])]),!0===t.editshow?n("button",{staticClass:"OneLine",on:{click:function(n){return t.handleEvent(e.landmarkId)}}},[t._v("Delete ")]):t._e(),n("br")],1)}),n("br"),n("br"),n("router-link",{attrs:{to:{name:"directions",params:{id:t.itinerary.itineraryId}}}},[n("button",[t._v("Directions")])]),n("button",{on:{click:t.toggleEdit}},[t._v("Edit")]),t.toggle?n("div",[t.editshow?t._e():n("button",{on:{click:function(e){e.preventDefault(),t.editshow=!0}}},[t._v("Delete From")]),t.editshow?n("button",{on:{click:function(e){e.preventDefault(),t.editshow=!1}}},[t._v("Cancel")]):t._e(),n("br"),n("router-link",{attrs:{to:{path:"/home/"+t.itinerary.itineraryId}}},[n("button",[t._v("Add To")])]),n("br"),n("label",[t._v("Change your starting point:")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.changedAddress,expression:"changedAddress"}],attrs:{type:"text"},domProps:{value:t.changedAddress},on:{input:function(e){e.target.composing||(t.changedAddress=e.target.value)}}}),n("br"),n("button",{attrs:{type:"submit",value:"Submit"},on:{click:t.updateStartingPoint}},[t._v("Submit")])],1):t._e()],2)},nt=[],rt={name:"ExistingItinerary",components:{},props:{LandmarkId:String,ItineraryId:Number},computed:{item:function(){return{LandmarkId:this.landmarkid,ItineraryId:this.itinerary.itineraryId}},changeStart:function(){return{itineraryId:this.itinerary.itineraryId,newStartingPoint:this.changedAddress}}},created:function(){this.getItinerary(this.$route.params.id),this.selectedItinerary()},data:function(){return{editshow:!1,toggle:!1,changedAddress:"",itinerary:{itineraryId:"",userId:"",dateOfTour:"",tourName:"",startPoint:"",landmarks:[{landmarkId:"",landmarkName:"",landmarkAddress:""}]}}},methods:{toggleEdit:function(){this.toggle=!this.toggle},updateStartingPoint:function(){var t=this,e="".concat("https://buildcitytoursapi.azurewebsites.net/api","/itinerary/updateStart");fetch(e,{method:"POST",headers:new Headers({Authorization:"Bearer "+o.getToken(),Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify(this.changeStart)}).then(function(e){e.ok?(alert("Starting location has been updated!"),t.getItinerary(t.$route.params.id)):console.log("Could not update starting location")}).catch(function(t){return console.error(t)})},getDate:function(t){var e=new Date(t),n=e.getDate(),r=e.getMonth(),a=e.getFullYear();return"".concat(r,"/").concat(n,"/").concat(a)},deleteLandmark:function(){var t=this;fetch("".concat("https://buildcitytoursapi.azurewebsites.net/api","/itinerary/remove?itineraryid=").concat(this.ItineraryId,"&landmarkid=").concat(this.LandmarkId),{method:"DELETE",headers:new Headers({Authorization:"Bearer "+o.getToken(),Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify(this.item)}).then(function(e){e.ok?t.getItinerary(t.$route.params.id):console.log("Could not delete landmark")}).catch(function(t){return console.error(t)})},handleEvent:function(t){this.landmarkid=t,this.deleteLandmark(),this.itinerary.dateOfTour=""},getItinerary:function(t){var e=this;fetch("".concat("https://buildcitytoursapi.azurewebsites.net/api","/itinerary/display?itineraryId=").concat(t),{method:"GET",headers:new Headers({Authorization:"Bearer "+o.getToken()})}).then(function(t){if(t.ok)return t.json();console.log("error fetching itinerary")}).then(function(t){e.itinerary=t}).catch(function(t){return console.error(t)})}},reloadPage:function(){window.location.reload()}},at=rt,it=(n("ccb1"),Object(u["a"])(at,et,nt,!1,null,"05312c30",null)),ot=it.exports,st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"detail"}},[n("h1",{staticClass:"itemDetails"},[n("a",{attrs:{target:"_blank",href:t.landmark.website}},[t._v(t._s(t.landmark.name))])]),n("h3",{staticClass:"itemDetails"},[t._v(t._s(t.landmark.vicinity))]),n("h3",{staticClass:"itemDetails"},[t._v(t._s(t.landmark.international_phone_number))]),n("h3",{staticClass:"itemDetails"},[t._v("Rating: "+t._s(t.correctRating)+" out of 5 ("+t._s(t.correctNumRatings)+" ratings)")]),!1===t.ratingshow?n("button",{on:{click:function(e){t.ratingshow=!0}}},[t._v("Submit a new Rating")]):t._e(),!0===t.ratingshow?n("div",[n("p",[n("label",{attrs:{for:"rating"}},[t._v("Your Rating:")]),n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.inputedAverageRating,expression:"inputedAverageRating",modifiers:{number:!0}}],attrs:{id:"rating"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(e){var n="_value"in e?e._value:e.value;return t._n(n)});t.inputedAverageRating=e.target.multiple?n:n[0]}}},[n("option",[t._v("5")]),n("option",[t._v("4")]),n("option",[t._v("3")]),n("option",[t._v("2")]),n("option",[t._v("1")])])]),n("button",{attrs:{type:"submit",value:"Submit"},on:{click:t.addRating}},[t._v("Submit Rating")]),!0===t.ratingshow?n("button",{staticClass:"cancel",on:{click:function(e){t.ratingshow=!1}}},[t._v("Cancel")]):t._e()]):t._e(),n("div",[!t.addshow&&t.user?n("button",{on:{click:function(e){t.addshow=!0}}},[t._v("Add this landmark to an Existing Itinerary")]):t._e()]),t.user&&t.addshow?n("div",[n("div",[n("select-itin",{on:{selected:t.handleEvent}}),n("add",{attrs:{LandmarkId:t.landmark.place_id,LandmarkName:t.landmark.name,LandmarkAddress:t.landmark.vicinity,ItineraryId:t.itineraryId},on:{"landmark-added":function(e){t.addshow=!1}}}),t.addshow?n("button",{staticClass:"cancel",on:{click:function(e){t.addshow=!1}}},[t._v("Cancel")]):t._e()],1)]):t._e()])},ct=[],ut=(n("7f7f"),{name:"Detail",components:{Add:z,SelectItin:P},data:function(){return{ratingshow:!1,addshow:!1,itineraryId:"",landmark:{},cRating:{},apiRating:"",user:null,inputedAverageRating:5}},computed:{correctRating:function(){var t;return t=null!=this.cRating.averageRating?this.cRating.averageRating:this.landmark.rating,t},correctNumRatings:function(){var t;return t=null!=this.cRating.numberOfRatings?this.cRating.numberOfRatings:this.landmark.user_ratings_total,t},newRatingInput:function(){return{landmarkVM:{LandmarkId:this.landmark.place_id,LandmarkName:this.landmark.name,LandmarkAddress:this.landmark.vicinity},newAverageRating:((this.inputedAverageRating+this.correctRating*this.correctNumRatings)/(this.correctNumRatings+1)).toFixed(1),newNumberOfRatings:this.correctNumRatings+1}}},methods:{getLandmark:function(t){var e=this;fetch("".concat("https://buildcitytoursapi.azurewebsites.net/api","/search/place?placeid=").concat(t),{method:"GET"}).then(function(t){if(t.ok)return console.log(t.json),t.json();console.log("error fetching place")}).then(function(t){e.landmark=t.result}).catch(function(t){return console.error(t)})},handleEvent:function(t){this.itineraryId=t},getCRating:function(t){var e=this,n="".concat("https://buildcitytoursapi.azurewebsites.net/api","/itinerary/getRating?placeId=").concat(t);fetch(n,{method:"GET",headers:new Headers({Authorization:"Bearer "+o.getToken(),Accept:"application/json","Content-Type":"application/json"})}).then(function(t){t.ok?t.json().then(function(t){e.cRating=t}):console.log("Could not get itineraries")}).catch(function(t){return console.error(t)})},addRating:function(){var t=this,e="".concat("https://buildcitytoursapi.azurewebsites.net/api","/itinerary/createRating");fetch(e,{method:"POST",headers:new Headers({Authorization:"Bearer "+o.getToken(),Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify(this.newRatingInput)}).then(function(e){e.ok?(alert("Rating has been posted!"),t.getLandmark(t.$route.params.id),t.getCRating(t.$route.params.id),t.user=o.getUser(),t.ratingshow=!1):console.log("Could not add rating")}).catch(function(t){return console.error(t)})},finalAddRating:function(t){this.apiRating=t.rating},displayCorrectRating:function(t,e){null!=e.AverageRating?this.correctRating=e.AverageRating:this.correctRating=t,console.log(this.cRating.AverageRating),console.log(this.apiRating),console.log(this.correctRatingRating)}},created:function(){this.getLandmark(this.$route.params.id),this.getCRating(this.$route.params.id),this.user=o.getUser()},mounted:function(){}}),lt=ut,dt=(n("5f6c"),Object(u["a"])(lt,st,ct,!1,null,null,null)),pt=dt.exports,ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[t._l(t.itineraries,function(e){return n("h1",{key:e.itineraryId},[n("router-link",{attrs:{to:{name:"itinerary",params:{id:e.itineraryId}}}},[t._v(t._s(e.tourName))])],1)}),n("div",{attrs:{id:"space"}}),n("div",{staticClass:"btn"},[n("button",{on:{click:function(e){e.preventDefault(),t.selectshow=!0}}},[t._v("Delete an Itinerary")]),!0===t.selectshow?n("div",[n("div",[n("SelectItin",{on:{selected:t.handleEvent}}),n("button",{on:{click:function(e){return e.preventDefault(),t.deleteItinerary(e)}}},[t._v("Delete")])],1),n("button",{staticClass:"cancel",on:{click:function(e){e.preventDefault(),t.selectshow=!1}}},[t._v("Cancel")])]):t._e()]),n("div",{staticClass:"btn"},[n("button",{on:{click:function(e){e.preventDefault(),t.showform=!0}}},[t._v("Create a New Itinerary")]),!0===t.showform?n("div",[n("CreateItin",{on:{"itinerary-added":t.itineraryAdded}}),n("button",{staticClass:"cancel",on:{click:function(e){e.preventDefault(),t.showform=!1}}},[t._v("Cancel")])],1):t._e()])],2)])},mt=[],ft={name:"ItineraryList",components:{CreateItin:T,SelectItin:P},created:function(){this.getItineraries()},data:function(){return{itineraryId:"",selectshow:!1,showform:!1,itineraries:[{itineraryId:"",userId:"",dateOfTour:"",tourName:"",startPoint:""}]}},methods:{getItineraries:function(){var t=this;fetch("".concat("https://buildcitytoursapi.azurewebsites.net/api","/itinerary/list"),{method:"GET",headers:new Headers({Authorization:"Bearer "+o.getToken()})}).then(function(t){if(t.ok)return t.json();console.log("error fetching itinerary")}).then(function(e){t.itineraries=e}).catch(function(t){return console.error(t)})},handleEvent:function(t){this.itineraryId=t},deleteItinerary:function(){var t=this,e="".concat("https://buildcitytoursapi.azurewebsites.net/api","/itinerary/delete?itineraryId=").concat(this.itineraryId);fetch(e,{method:"DELETE",headers:new Headers({Authorization:"Bearer "+o.getToken(),Accept:"application/json","Content-Type":"application/json"})}).then(function(e){e.ok?(t.getItineraries(),t.selectshow=!1):console.log("Could not delete itinerary")}).catch(function(t){return console.error(t)})},itineraryAdded:function(){this.getItineraries(),this.showform=!1}}},vt=ft,gt=(n("9140"),Object(u["a"])(vt,ht,mt,!1,null,"036b005c",null)),yt=gt.exports,bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",{attrs:{id:"start"}},[t._v(t._s(this.trip[0].start_address))]),t._l(t.trip,function(e){return n("div",{key:e.end_address},[n("h4",[t._v(t._s(e.duration.text)+" - "+t._s(e.distance.text))]),n("ul",t._l(e.steps,function(e){return n("li",{key:e.index,domProps:{innerHTML:t._s(t.replaceText(e.html_instructions,e.distance.text))}})}),0),t._l(t.landmarks,function(r){return n("div",{key:r.landmarkId},[r.landmarkAddress.substring(0,4)===e.end_address.substring(0,4)?n("h3",[t._v(t._s(r.landmarkName))]):t._e()])}),n("h2",[t._v(t._s(e.end_address))])],2)})],2)},_t=[],wt={name:"Directions",data:function(){return{trip:[],geo:[],landmarks:[]}},methods:{getDirections:function(t){var e=this;fetch("".concat("https://buildcitytoursapi.azurewebsites.net/api","/directions?itineraryId=").concat(t),{method:"GET",headers:new Headers({Authorization:"Bearer "+o.getToken()})}).then(function(t){if(t.ok)return t.json();console.log("error fetching trip")}).then(function(t){e.trip=t.routes[0].legs}).catch(function(t){return console.error(t)})},replaceText:function(t,e){return"".concat(t," - ").concat(e)},getItinerary:function(t){var e=this;fetch("".concat("https://buildcitytoursapi.azurewebsites.net/api","/itinerary/display?itineraryId=").concat(t),{method:"GET",headers:new Headers({Authorization:"Bearer "+o.getToken()})}).then(function(t){if(t.ok)return t.json();console.log("error fetching itinerary")}).then(function(t){e.landmarks=t.landmarks}).catch(function(t){return console.error(t)})}},created:function(){this.getDirections(this.$route.params.id),this.getItinerary(this.$route.params.id)}},kt=wt,It=(n("d113"),Object(u["a"])(kt,bt,_t,!1,null,"c35b356c",null)),Ct=It.exports;r["a"].use(p["a"]);var At=new p["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:U,meta:{requiresAuth:!1}},{path:"/home/:id",name:"home",component:U,meta:{requiresAuth:!0}},{path:"/login",name:"login",component:Y,meta:{requiresAuth:!1}},{path:"/register",name:"register",component:tt,meta:{requiresAuth:!1}},{path:"/detail/:id",name:"detail",component:pt,meta:{requiresAuth:!1}},{path:"/itinerary/:id",name:"itinerary",component:ot,meta:{requiresAuth:!0}},{path:"/itineraries",name:"itineraries",component:yt,meta:{requiresAuth:!0}},{path:"/search",name:"search",component:_,meta:{requiresAuth:!1}},{path:"/directions/:id",name:"directions",component:Ct,meta:{requiresAuth:!0}}]});At.beforeEach(function(t,e,n){var r=t.matched.some(function(t){return t.meta.requiresAuth}),a=o.getUser();r&&!a?n("/login"):n()});var Tt=At;r["a"].config.productionTip=!1,new r["a"]({router:Tt,render:function(t){return t(d)}}).$mount("#app")},"5f6c":function(t,e,n){"use strict";var r=n("2807"),a=n.n(r);a.a},"65eb":function(t,e,n){"use strict";var r=n("dddb"),a=n.n(r);a.a},9140:function(t,e,n){"use strict";var r=n("2c28"),a=n.n(r);a.a},"97dc":function(t,e,n){"use strict";var r=n("481e"),a=n.n(r);a.a},c366:function(t,e,n){},c6dd:function(t,e,n){"use strict";var r=n("03a4"),a=n.n(r);a.a},ccb1:function(t,e,n){"use strict";var r=n("2d49"),a=n.n(r);a.a},cccb:function(t,e,n){"use strict";var r=n("d563"),a=n.n(r);a.a},d012:function(t,e,n){},d113:function(t,e,n){"use strict";var r=n("d012"),a=n.n(r);a.a},d563:function(t,e,n){},dddb:function(t,e,n){}});
//# sourceMappingURL=app.076cd720.js.map