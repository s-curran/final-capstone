(function(t){function e(e){for(var r,o,s=e[0],c=e[1],l=e[2],d=0,m=[];d<s.length;d++)o=s[d],a[o]&&m.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(m.length)m.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},a={app:0},i=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0782":function(t,e,n){"use strict";var r=n("c366"),a=n.n(r);a.a},2807:function(t,e,n){},"2a1d":function(t,e,n){},"2f71":function(t,e,n){"use strict";var r=n("4bbc"),a=n.n(r);a.a},"35b7":function(t,e,n){"use strict";var r=n("2a1d"),a=n.n(r);a.a},"481e":function(t,e,n){},"4bbc":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("h1",{attrs:{id:"pageTitle"}},[t._v("City Tours")]),t.user?n("div",[n("div",[n("button",{on:{click:t.logout}},[t._v("Logout")]),n("div",[n("button",{on:{click:t.viewItinerary}},[t._v("View Saved Itineraries")])])])]):n("div",[n("button",[n("router-link",{attrs:{id:"link",to:{name:"login"}}},[t._v("Login")])],1),n("div"),n("button",[n("router-link",{attrs:{id:"link",to:{name:"register"}}},[t._v("Register")])],1)]),n("button",[n("router-link",{attrs:{id:"link",to:"/"}},[t._v("Home")])],1)]),n("router-view")],1)},i=[],o=(n("a481"),n("28a5"),{getToken:function(){try{return localStorage.getItem("Authorization")}catch(t){return null}},saveToken:function(t){localStorage.setItem("Authorization",t)},destroyToken:function(){localStorage.removeItem("Authorization")},getUser:function(){var t=localStorage.getItem("Authorization"),e=null;if(t){var n=t.split(".")[1],r=n.replace(/-/g,"+").replace(/_/g,"/"),a=new Date/1e3,i=JSON.parse(window.atob(r));a>i.exp?this.destroyToken():(e=i,console.log(e))}return e},logout:function(){localStorage.removeItem("Authorization")}}),s={data:function(){return{user:null}},methods:{logout:function(){o.logout(),this.$router.push("/login"),this.user=null},viewItinerary:function(){this.$router.push("/itineraries")}},created:function(){this.user=o.getUser()},watch:{$route:function(){this.user=o.getUser()}}},c=s,l=(n("2f71"),n("2877")),u=Object(l["a"])(c,a,i,!1,null,"f14026c2",null),d=u.exports,m=(n("759f"),n("8c4f")),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("search",{staticClass:"search",on:{results:t.displayResults},model:{value:t.searchResults,callback:function(e){t.searchResults=e},expression:"searchResults"}}),n("br"),t.user?n("div",{staticClass:"itin"},[!1===t.toggle?n("div",{staticClass:"button"},[n("button",{attrs:{type:"button"},on:{click:t.toggleForm}},[t._v("Create Itinerary")])]):n("div",[n("create-itin",{staticClass:"create"})],1),n("p",[t._v("-OR-")]),n("select-itin",{staticClass:"selectItin",on:{selected:t.handleEvent}})],1):t._e(),t.searchResults.length>=1?n("div",[n("h3",{staticClass:"listTitle"},[t._v("Landmarks to visit "+t._s(t.cityName)+":")]),n("ul",t._l(t.searchResults,function(e){return n("li",{key:e,staticClass:"result"},[n("router-link",{staticClass:"resultText",attrs:{to:{name:"detail",params:{id:e.place_id}}}},[t._v(t._s(e.name))]),t.itineraryId?n("div",{staticClass:"addTo"},[n("add",{attrs:{LandmarkId:e.place_id,LandmarkName:e.name,LandmarkAddress:e.vicinity,ItineraryId:t.itineraryId}})],1):t._e()],1)}),0)]):n("div",[n("h3",{staticClass:"needToSearch"},[t._v("Enter a city above to view landmarks!")])])],1)},h=[],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search"},[n("br"),n("button",{attrs:{type:"button"},on:{click:t.getLocation}},[t._v("Allow Access to Your Location")]),n("br"),n("div",{staticClass:"box"},[n("label",[t._v("Distance:")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.radius,expression:"radius"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.radius=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"1609.34"}},[t._v("1 mile")]),n("option",{attrs:{value:"3218.69"}},[t._v("2 miles")]),n("option",{attrs:{value:"8046.72"}},[t._v("5 miles")]),n("option",{attrs:{value:"16093.4"}},[t._v("10 miles")])])]),n("div",{staticClass:"box"},[n("label",[t._v("Type:")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.type=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"tourist_attraction"}},[t._v("Tourist Atrraction")]),n("option",{attrs:{value:"restaurant"}},[t._v("Restaurant")]),n("option",{attrs:{value:"stadium"}},[t._v("Sports")]),n("option",{attrs:{value:"zoo"}},[t._v("Zoo")]),n("option",{attrs:{value:"museum"}},[t._v("Museum")])])]),n("label",[t._v("Only open now")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.opennow,expression:"opennow"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.opennow)?t._i(t.opennow,null)>-1:t.opennow},on:{change:function(e){var n=t.opennow,r=e.target,a=!!r.checked;if(Array.isArray(n)){var i=null,o=t._i(n,i);r.checked?o<0&&(t.opennow=n.concat([i])):o>-1&&(t.opennow=n.slice(0,o).concat(n.slice(o+1)))}else t.opennow=a}}}),n("br"),n("button",{attrs:{type:"submit"},on:{click:t.findLandmarks}},[t._v("Submit")])])},v=[],g={name:"Search",data:function(){return{lat:"",long:"",radius:"",type:"",opennow:!1,key:"AIzaSyANWIg-qW05HeNmXG2Yh1Fd7w8I9w4WXto",results:[],city:""}},methods:{findLandmarks:function(){var t=this,e="".concat("https://localhost:44392/api","/search/places?location=").concat(this.lat,",").concat(this.long,"&radius=").concat(this.radius,"&type=").concat(this.type,"&opennow=").concat(this.opennow);fetch(e).then(function(e){e.ok?e.text().then(function(e){t.results=JSON.parse(e).results,t.$emit("results",t.results)}):console.log(e.status)}).catch(function(t){console.log(t)})},getLocation:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(this.showPosition):alert("Geolocation is not supported by this browser")},showPosition:function(t){this.lat=t.coords.latitude,this.long=t.coords.longitude}}},y=g,_=(n("0782"),Object(l["a"])(y,f,v,!1,null,null,null)),b=_.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"box"},[n("label",[t._v("Itinenary Name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.itinerary.TourName,expression:"itinerary.TourName"}],attrs:{type:"text"},domProps:{value:t.itinerary.TourName},on:{input:function(e){e.target.composing||t.$set(t.itinerary,"TourName",e.target.value)}}})]),n("div",{staticClass:"box"},[n("label",[t._v("Itinenary Date")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.itinerary.DateOfTour,expression:"itinerary.DateOfTour"}],attrs:{type:"date"},domProps:{value:t.itinerary.DateOfTour},on:{input:function(e){e.target.composing||t.$set(t.itinerary,"DateOfTour",e.target.value)}}})]),n("div",{staticClass:"box"},[n("label",[t._v("Starting Address")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.itinerary.StartPoint,expression:"itinerary.StartPoint"}],attrs:{type:"text"},domProps:{value:t.itinerary.StartPoint},on:{input:function(e){e.target.composing||t.$set(t.itinerary,"StartPoint",e.target.value)}}})]),n("button",{attrs:{type:"button"},on:{click:t.saveItin}},[t._v("Create")])])},w=[],I={name:"CreateItin",data:function(){return{itinerary:{DateOfTour:"",TourName:"",StartPoint:""}}},methods:{saveItin:function(){var t="".concat("https://localhost:44392/api","/itinerary/create");fetch(t,{method:"POST",headers:new Headers({Authorization:"Bearer "+o.getToken(),Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify(this.itinerary)}).then(function(t){t.ok?t.json().then(function(t){console.log(t),alert("Your itinerary has been created!!")}):console.log("Itinerary failed to save!!")}).catch(function(t){console.error(t)})}}},C=I,T=(n("b442"),Object(l["a"])(C,k,w,!1,null,"b6477706",null)),A=T.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.selected=e.target.multiple?n:n[0]}}},[t._v("\n      Select Your Itinerary\n    "),t._l(t.options,function(e){return n("option",{key:e.itineraryId,domProps:{value:e.itineraryId},on:{click:t.selectItin}},[t._v(t._s(e.tourName))])})],2)])},N=[],S={name:"SelectItin",data:function(){return{options:[],selected:""}},methods:{getItins:function(){var t=this,e="".concat("https://localhost:44392/api","/itinerary/list");fetch(e,{method:"GET",headers:new Headers({Authorization:"Bearer "+o.getToken(),Accept:"application/json","Content-Type":"application/json"})}).then(function(e){e.ok?e.json().then(function(e){t.options=e}):console.log("Could not get itineraries")}).catch(function(t){return console.error(t)})},selectItin:function(){this.$emit("selected",this.selected)}},created:function(){this.getItins()}},P=S,O=Object(l["a"])(P,x,N,!1,null,null,null),j=O.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{attrs:{type:"button"},on:{click:t.addToItin}},[t._v("Add to Itinerary")])])},L=[],$=(n("c5f6"),{name:"Add",props:{LandmarkId:String,LandmarkName:String,LandmarkAddress:String,ItineraryId:Number},computed:{item:function(){return{LandmarkId:this.LandmarkId,LandmarkName:this.LandmarkName,LandmarkAddress:this.LandmarkAddress,ItineraryId:this.ItineraryId}}},methods:{addToItin:function(){var t="".concat("https://localhost:44392/api","/itinerary/add");fetch(t,{method:"POST",headers:new Headers({Authorization:"Bearer "+o.getToken(),Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify(this.item)}).then(function(t){t.ok?alert("Landmark has been added to itinerary"):console.log("Could not add landmark")}).catch(function(t){return console.error(t)})}}}),D=$,q=Object(l["a"])(D,E,L,!1,null,null,null),z=q.exports,R={name:"home",components:{Search:b,CreateItin:A,SelectItin:j,Add:z},data:function(){return{cityName:"near you",itineraryId:"",user:null,toggle:!1,searchResults:[]}},methods:{displayResults:function(t){this.searchResults=t},handleEvent:function(t){this.itineraryId=t},toggleForm:function(){this.toggle=!0}},created:function(){this.user=o.getUser()},watch:{$route:function(){this.user=o.getUser()}}},U=R,H=(n("cccb"),Object(l["a"])(U,p,h,!1,null,null,null)),J=H.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center",attrs:{id:"login"}},[n("form",{staticClass:"form-signin",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[n("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("Please Sign In")]),t.invalidCredentials?n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v("\n      Invalid username and password!\n    ")]):t._e(),this.$route.query.registration?n("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v("\n      Thank you for registering, please sign in.\n    ")]):t._e(),n("div",{attrs:{id:"username"}},[n("label",{staticClass:"sr-only",attrs:{for:"username"}},[t._v("Username")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"text",id:"username",placeholder:"Username",required:"",autofocus:""},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}})]),n("div",{attrs:{id:"password"}},[n("label",{staticClass:"sr-only",attrs:{for:"password"}},[t._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"Password",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]),t._m(0),n("div",{attrs:{id:"register"}},[n("router-link",{attrs:{to:{name:"register"}}},[t._v("Need an account? Click here to create an account.")])],1)])])},G=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"btn"}},[n("button",{attrs:{type:"submit"}},[t._v("Sign in")])])}],M=(n("6762"),n("2fdb"),{name:"login",components:{},data:function(){return{user:{username:"",password:""},invalidCredentials:!1}},methods:{login:function(){var t=this;fetch("".concat("https://localhost:44392/api","/login"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(this.user)}).then(function(e){if(e.ok)return e.text();t.invalidCredentials=!0}).then(function(e){void 0!=e&&(e.includes('"')&&(e=e.replace(/"/g,"")),o.saveToken(e),t.$router.push("/"))}).catch(function(t){return console.error(t)})}}}),W=M,Y=(n("97dc"),Object(l["a"])(W,B,G,!1,null,"5e46e21b",null)),F=Y.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center",attrs:{id:"register"}},[n("form",{staticClass:"form-register",on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[n("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("Create Account")]),t.registrationErrors?n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v("\n      There were problems registering this user.\n    ")]):t._e(),n("div",{attrs:{id:"un"}},[n("label",{staticClass:"sr-only",attrs:{for:"username"}},[t._v("Username")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"text",id:"username",placeholder:"Username",required:"",autofocus:""},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}})]),n("div",{attrs:{id:"pw"}},[n("label",{staticClass:"sr-only",attrs:{for:"password"}},[t._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"Password",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),n("div",{staticClass:"confirm"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.user.confirmPassword,expression:"user.confirmPassword"}],staticClass:"form-control",attrs:{type:"password",id:"confirmPassword",placeholder:"Confirm Password",required:""},domProps:{value:t.user.confirmPassword},on:{input:function(e){e.target.composing||t.$set(t.user,"confirmPassword",e.target.value)}}})])]),t._m(0),n("div",{attrs:{id:"login"}},[n("router-link",{attrs:{to:{name:"login"}}},[t._v("\n      Have an account? Click here to login.\n    ")])],1)])])},V=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"btn"}},[n("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[t._v("\n      Create Account\n    ")])])}],Z={name:"register",data:function(){return{user:{username:"",password:"",confirmPassword:"",role:"user"},registrationErrors:!1}},methods:{register:function(){var t=this;fetch("".concat("https://localhost:44392/api","/register"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(this.user)}).then(function(e){e.ok?t.$router.push({path:"/login",query:{registration:"success"}}):t.registrationErrors=!0}).then(function(t){return console.error(t)})}}},K=Z,Q=(n("35b7"),Object(l["a"])(K,X,V,!1,null,"b8a278fe",null)),tt=Q.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v(t._s(t.itinerary.tourName))]),n("p",[t._v(t._s(t.itinerary.dateOfTour))]),t._l(t.itinerary.landmarks,function(e){return n("div",{key:e.landmarkId},[n("p",[t._v(t._s(e.landmarkName))]),n("button",{on:{click:function(n){return t.handleEvent(e.landmarkId)}}},[t._v("Delete "+t._s(e.landmarkName)+"from itinerary")])])})],2)},nt=[],rt={name:"ExistingItinerary",components:{},props:{LandmarkId:String,ItineraryId:Number},computed:{item:function(){return{LandmarkId:this.landmarkid,ItineraryId:this.itinerary.itineraryId}}},created:function(){this.getItinerary(this.$route.params.id)},data:function(){return{itinerary:{itineraryId:"",userId:"",dateOfTour:"",tourName:"",startPoint:"",landmarks:[{landmarkId:"",landmarkName:"",landmarkAddress:""}]}}},methods:{deleteLandmark:function(){fetch("".concat("https://localhost:44392/api","/itinerary/remove?itineraryid=").concat(this.ItineraryId,"&landmarkid=").concat(this.LandmarkId),{method:"DELETE",headers:new Headers({Authorization:"Bearer "+o.getToken(),Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify(this.item)}).then(function(t){t.ok?(alert("Landmark has been deleted from itinerary"),r["a"].$forceUpdate()):console.log("Could not delete landmark")}).catch(function(t){return console.error(t)})},handleEvent:function(t){this.landmarkid=t,this.deleteLandmark()},getItinerary:function(t){var e=this;fetch("".concat("https://localhost:44392/api","/itinerary/display?itineraryId=").concat(t),{method:"GET",headers:new Headers({Authorization:"Bearer "+o.getToken()})}).then(function(t){if(t.ok)return t.json();console.log("error fetching itinerary")}).then(function(t){e.itinerary=t}).catch(function(t){return console.error(t)})}}},at=rt,it=Object(l["a"])(at,et,nt,!1,null,null,null),ot=it.exports,st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"detail"}},[n("h1",{staticClass:"heading"},[t._v(" Site Details ")]),n("h3",{staticClass:"itemDetails"},[t._v("Name of Attraction: "+t._s(t.landmark.name))]),n("h3",{staticClass:"itemDetails"},[t._v("Phone Number: "+t._s(t.landmark.international_phone_number))]),n("h3",{staticClass:"itemDetails"},[t._v("Address: "+t._s(t.landmark.vicinity))]),n("h3",{staticClass:"itemDetails"},[t._v("Composite Rating (out of 5): "+t._s(t.landmark.rating))]),n("h3",{staticClass:"itemDetails"},[t._v("Total number of ratings to date: "+t._s(t.landmark.user_ratings_total))]),n("h3",{staticClass:"itemDetails"},[t._v("Website:  "+t._s(t.landmark.website))]),n("select-itin",{on:{selected:t.handleEvent}}),n("add",{attrs:{LandmarkId:t.landmark.place_id,LandmarkName:t.landmark.name,LandmarkAddress:t.landmark.vicinity,ItineraryId:t.itineraryId}})],1)},ct=[],lt={name:"Detail",components:{Add:z,SelectItin:j},data:function(){return{itineraryId:"",landmark:{}}},methods:{getLandmark:function(t){var e=this;fetch("".concat("https://localhost:44392/api","/search/place?placeid=").concat(t),{method:"GET"}).then(function(t){if(t.ok)return console.log(t.json),t.json();console.log("error fetching place")}).then(function(t){e.landmark=t.result}).catch(function(t){return console.error(t)})},handleEvent:function(t){this.itineraryId=t}},created:function(){this.getLandmark(this.$route.params.id)}},ut=lt,dt=(n("5f6c"),Object(l["a"])(ut,st,ct,!1,null,null,null)),mt=dt.exports,pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[t._l(t.itineraries,function(e){return n("h1",{key:e.itineraryId},[n("router-link",{attrs:{to:{name:"itinerary",params:{id:e.itineraryId}}}},[t._v(t._s(e.tourName))])],1)}),n("div",{attrs:{id:"space"}}),n("div",{staticClass:"btn"},[n("button",{on:{click:function(e){e.preventDefault(),t.selectshow=!0}}},[t._v("Delete an Itinerary")]),!0===t.selectshow?n("div",[n("SelectItin",{on:{selected:t.handleEvent}}),n("button",{staticStyle:{"margin-left":"296px"},on:{click:function(e){return e.preventDefault(),t.deleteItinerary(e)}}},[t._v("Delete")]),n("button",{staticClass:"cancel",on:{click:function(e){e.preventDefault(),t.selectshow=!1}}},[t._v("Cancel")])],1):t._e()]),n("div",{staticClass:"btn"},[n("button",{on:{click:function(e){e.preventDefault(),t.showform=!0}}},[t._v("Create a New Itinerary")]),!0===t.showform?n("div",[n("CreateItin",{on:{click:function(e){return e.preventDefault(),t.reloadPage(e)}}}),n("button",{staticClass:"cancel",on:{click:function(e){e.preventDefault(),t.showform=!1}}},[t._v("Cancel")])],1):t._e()])],2)])},ht=[],ft={name:"ItineraryList",components:{CreateItin:A,SelectItin:j},created:function(){this.getItineraries()},data:function(){return{itineraryId:"",selectshow:!1,showform:!1,itineraries:[{itineraryId:"",userId:"",dateOfTour:"",tourName:"",startPoint:""}]}},methods:{getItineraries:function(){var t=this;fetch("".concat("https://localhost:44392/api","/itinerary/list"),{method:"GET",headers:new Headers({Authorization:"Bearer "+o.getToken()})}).then(function(t){if(t.ok)return t.json();console.log("error fetching itinerary")}).then(function(e){t.itineraries=e}).catch(function(t){return console.error(t)})},handleEvent:function(t){this.itineraryId=t},deleteItinerary:function(){var t="".concat("https://localhost:44392/api","/itinerary/delete?itineraryId=").concat(this.itineraryId);fetch(t,{method:"DELETE",headers:new Headers({Authorization:"Bearer "+o.getToken(),Accept:"application/json","Content-Type":"application/json"})}).then(function(t){t.ok?alert("Itinerary has been deleted"):console.log("Could not delete itinerary")}).catch(function(t){return console.error(t)})},reloadPage:function(){window.location.reload()}}},vt=ft,gt=(n("87ab"),Object(l["a"])(vt,pt,ht,!1,null,"6f711158",null)),yt=gt.exports;r["a"].use(m["a"]);var _t=new m["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:J,meta:{requiresAuth:!1}},{path:"/login",name:"login",component:F,meta:{requiresAuth:!1}},{path:"/register",name:"register",component:tt,meta:{requiresAuth:!1}},{path:"/detail/:id",name:"detail",component:mt,meta:{requiresAuth:!1}},{path:"/itinerary/:id",name:"itinerary",component:ot,meta:{requiresAuth:!0}},{path:"/itineraries",name:"itineraries",component:yt,meta:{requiresAuth:!0}},{path:"/search",name:"search",component:b,meta:{requiresAuth:!1}}]});_t.beforeEach(function(t,e,n){var r=t.matched.some(function(t){return t.meta.requiresAuth}),a=o.getUser();r&&!a?n("/login"):n()});var bt=_t;r["a"].config.productionTip=!1,new r["a"]({router:bt,render:function(t){return t(d)}}).$mount("#app")},"5f6c":function(t,e,n){"use strict";var r=n("2807"),a=n.n(r);a.a},"87ab":function(t,e,n){"use strict";var r=n("bdfe"),a=n.n(r);a.a},"97dc":function(t,e,n){"use strict";var r=n("481e"),a=n.n(r);a.a},b442:function(t,e,n){"use strict";var r=n("e6bf"),a=n.n(r);a.a},bdfe:function(t,e,n){},c366:function(t,e,n){},cccb:function(t,e,n){"use strict";var r=n("d563"),a=n.n(r);a.a},d563:function(t,e,n){},e6bf:function(t,e,n){}});
//# sourceMappingURL=app.625bba07.js.map